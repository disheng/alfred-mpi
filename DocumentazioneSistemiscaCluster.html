<html><head><title>Documentazione cluster</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=6NUlva0wA0_-VM29T9f5GA');ol{margin:0;padding:0}.c7{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c5{color:#1155cc;text-decoration:underline}.c3{color:inherit;text-decoration:inherit}.c4{color:#6aa84f}.c8{font-size:18pt}.c10{color:#93c47d}.c9{color:#ff0000}.c2{color:#3d85c6}.c1{direction:ltr}.c6{height:11pt}.c0{font-family:"Ubuntu Mono"}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c7"><p class="c1"><span class="c8">Documentazione su cluster</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>E&#39; necessario installare STAR: Cluster </span><span class="c5"><a class="c3" href="http://star.mit.edu/cluster/">http://star.mit.edu/cluster/</a></span></p><p class="c1"><span>&gt; </span><span class="c0">easy_install StarCluster</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Configurare STAR:Cluster per il template di cluster ( </span><span class="c5"><a class="c3" href="http://star.mit.edu/cluster/docs/latest/manual/configuration.html#defining-cluster-templates">http://star.mit.edu/cluster/docs/latest/manual/configuration.html#defining-cluster-templates</a></span><span>&nbsp;) ad esempio:</span></p><p class="c1 c6"><span></span></p><p class="c1"><span class="c0">[cluster </span><span class="c0 c4">alfcluster</span><span class="c0">]</span></p><p class="c1"><span class="c0">KEYNAME = alf-keys</span></p><p class="c1"><span class="c0">CLUSTER_SIZE = 3</span></p><p class="c1"><span class="c0">CLUSTER_USER = </span><span class="c0 c9">alf</span></p><p class="c1"><span class="c0">CLUSTER_SHELL = bash</span></p><p class="c1"><span class="c0">NODE_IMAGE_ID = ami-765b3e1f</span></p><p class="c1"><span class="c0">NODE_INSTANCE_TYPE = m1.medium</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Far partire il cluster con</span></p><p class="c1"><span>&gt; </span><span class="c0">starcluster start -c </span><span class="c0 c10">alfcluster</span><span class="c0">&nbsp;</span><span class="c0 c2">mycluster</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Clone repository GitHub ( </span><span class="c5"><a class="c3" href="https://github.com/furio/alfred-mpi">https://github.com/furio/alfred-mpi</a></span><span>&nbsp;)</span></p><p class="c1"><span>Entrare nella directory </span><span class="c0">runningScripts/</span></p><p class="c1"><span>Copiare i file </span><span class="c0">.sh </span><span>sul cluster con</span></p><p class="c1"><span>&gt; </span><span class="c0">starcluster put </span><span class="c2 c0">mycluster</span><span class="c0">&nbsp;*.sh /home/</span><span class="c9 c0">alf</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Fare login nel cluster con</span></p><p class="c1"><span>&gt; </span><span class="c0">starcluster sshmaster </span><span class="c2 c0">mycluster</span></p><p class="c1"><span>&gt; </span><span class="c0">cd /home/</span><span class="c9 c0">alf</span></p><p class="c1"><span class="c0">&gt; chmod +s configClusterJava.sh</span></p><p class="c1"><span class="c0">&gt; chmod +x *.sh</span></p><p class="c1"><span class="c0">&gt; chown alf *.sh</span></p><p class="c1"><span class="c0">&gt; su - </span><span class="c9 c0">alf</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Eseguire</span></p><p class="c1"><span class="c0">&gt; init.sh $numeromacchine $nomeutente</span></p><p class="c1"><span>con $numeromacchine pari a CLUSTER_SIZE e $nome_utente pari a CLUSTER_USER della configurazione di starcluster</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Compilare e spostare JAR / File di configurazione:</span></p><p class="c1"><span>&gt; </span><span class="c0">mvn clean compile package shade:shade</span></p><p class="c1"><span>&gt; </span><span class="c0">starcluster put </span><span class="c2 c0">mycluster</span><span class="c0">&nbsp;$jar_e_file_conf /home/</span><span class="c9 c0">alf</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Editare il file </span><span class="c0">runAlfredMPI.sh</span><span>&nbsp;alla voce </span><span class="c0">OMPI_SLAVES </span><span>con il numero di slave a disposizione</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Run del JAR con:</span></p><p class="c1"><span>&gt; </span><span class="c0">runAlfredMPI.sh -c configuration.properties -d domain.properties</span></p><p class="c1 c6"><span></span></p><p class="c1"><span class="c8">Documentazione su singola macchina</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>E&#39; necessario avere una macchina con Java 7 (si pu&ograve; usare </span><span class="c0">configClusterJava.sh </span><span>a tale scopo)</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Clone repository GitHub ( </span><span class="c5"><a class="c3" href="https://github.com/furio/alfred-mpi">https://github.com/furio/alfred-mpi</a></span><span>&nbsp;)</span></p><p class="c1"><span>Entrare nella directory </span><span class="c0">runningScripts/</span></p><p class="c1"><span>Copiare i file </span><span class="c0">.sh </span><span>nella home dell&#39;utente prescelto</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Eseguire come utente</span></p><p class="c1"><span>&gt; </span><span class="c0">configClusterMpj.sh $USER</span></p><p class="c1 c6"><span class="c0"></span></p><p class="c1"><span>Compilare e spostare JAR / File di configurazione:</span></p><p class="c1"><span>&gt; </span><span class="c0">mvn clean compile package shade:shade</span></p><p class="c1"><span>&gt; </span><span class="c0">mv $jar_e_file_conf /home/$USER</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Editare il file </span><span class="c0">runAlfredMPI.sh</span><span>&nbsp;alla voce </span><span class="c0">OMPI_SLAVES </span><span>con il numero di slave richiesti</span></p><p class="c1 c6"><span></span></p><p class="c1"><span>Run del JAR con:</span></p><p class="c1"><span>&gt; </span><span class="c0">runAlfredMPI.sh -c configuration.properties -d domain.properties</span></p></body></html>
