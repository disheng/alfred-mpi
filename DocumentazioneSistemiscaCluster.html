<html><head><title>Documentazione cluster</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=6NUlva0wA0_-VM29T9f5GA');ol{margin:0;padding:0}.c9{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c5{color:inherit;text-decoration:inherit}.c2{color:#93c47d;font-family:"Ubuntu Mono"}.c8{color:#1155cc;text-decoration:underline}.c0{height:11pt;direction:ltr}.c3{color:#ff0000;font-family:"Ubuntu Mono"}.c6{color:#3d85c6}.c7{font-size:18pt}.c4{font-family:"Ubuntu Mono"}.c1{direction:ltr}.c10{color:#6aa84f}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c9"><p class="c1"><span class="c7">Documentazione su cluster</span></p><p class="c0"><span></span></p><p class="c1"><span>E&#39; necessario installare STAR: Cluster </span><span class="c8"><a class="c5" href="http://star.mit.edu/cluster/">http://star.mit.edu/cluster/</a></span></p><p class="c1"><span>&gt; </span><span class="c4">easy_install StarCluster</span></p><p class="c0"><span></span></p><p class="c1"><span>Configurare STAR:Cluster per il template di cluster ( </span><span class="c8"><a class="c5" href="http://star.mit.edu/cluster/docs/latest/manual/configuration.html#defining-cluster-templates">http://star.mit.edu/cluster/docs/latest/manual/configuration.html#defining-cluster-templates</a></span><span>&nbsp;) ad esempio:</span></p><p class="c0"><span></span></p><p class="c1"><span class="c4">[cluster </span><span class="c4 c10">alfcluster</span><span class="c4">]</span></p><p class="c1"><span class="c4">KEYNAME = alf-keys</span></p><p class="c1"><span class="c4">CLUSTER_SIZE = 3</span></p><p class="c1"><span class="c4">CLUSTER_USER = </span><span class="c3">alf</span></p><p class="c1"><span class="c4">CLUSTER_SHELL = bash</span></p><p class="c1"><span class="c4">NODE_IMAGE_ID = ami-765b3e1f</span></p><p class="c1"><span class="c4">NODE_INSTANCE_TYPE = m1.medium</span></p><p class="c0"><span class="c4"></span></p><p class="c0"><span class="c4"></span></p><p class="c1"><span>Far partire il cluster con</span></p><p class="c1"><span>&gt; </span><span class="c4">starcluster start -c </span><span class="c2">alfcluster</span><span class="c4">&nbsp;</span><span class="c6 c4">mycluster</span></p><p class="c0"><span class="c4"></span></p><p class="c1"><span>Clone repository GitHub ( </span><span class="c8"><a class="c5" href="https://github.com/furio/alfred-mpi">https://github.com/furio/alfred-mpi</a></span><span>&nbsp;)</span></p><p class="c1"><span>Entrare nella directory </span><span class="c4">runningScripts/</span></p><p class="c1"><span>Copiare i file </span><span class="c4">.sh </span><span>sul cluster con</span></p><p class="c1"><span>&gt; </span><span class="c4">starcluster put alfcluster *.sh /home/</span><span class="c3">alf</span></p><p class="c0"><span class="c4"></span></p><p class="c1"><span>Fare login nel cluster con</span></p><p class="c1"><span>&gt; </span><span class="c4">starcluster sshmaster </span><span class="c6 c4">mycluster</span></p><p class="c1"><span>&gt; </span><span class="c4">cd /home/</span><span class="c3">alf</span></p><p class="c1"><span class="c4">&gt; chmod +s configClusterJava.sh</span></p><p class="c1"><span class="c4">&gt; chmod +x *.sh</span></p><p class="c1"><span class="c4">&gt; chown alf *.sh</span></p><p class="c1"><span class="c4">&gt; su - </span><span class="c3">alf</span></p><p class="c0"><span></span></p><p class="c1"><span>Eseguire</span></p><p class="c1"><span class="c4">&gt; init.sh $numeromacchine $nomeutente</span></p><p class="c1"><span>con $numeromacchine pari a CLUSTER_SIZE e $nome_utente pari a CLUSTER_USER della configurazione di starcluster</span></p><p class="c0"><span class="c4"></span></p><p class="c1"><span>Compilare e spostare JAR / File di configurazione:</span></p><p class="c1"><span>&gt; </span><span class="c4">mvn clean compile package shade:shade</span></p><p class="c1"><span>&gt; </span><span class="c4">starcluster put </span><span class="c4 c6">mycluster</span><span class="c4">&nbsp;$jar_e_file_conf /home/</span><span class="c3">alf</span></p><p class="c0"><span></span></p><p class="c1"><span>Editare il file </span><span class="c4">runAlfredMPI.sh</span><span>&nbsp;alla voce </span><span class="c4">OMPI_SLAVES </span><span>con il numero di slave a disposizione</span></p><p class="c0"><span></span></p><p class="c1"><span>Run del JAR con:</span></p><p class="c1"><span>&gt; </span><span class="c4">runAlfredMPI.sh -c configuration.properties -d domain.properties</span></p><p class="c0"><span></span></p><p class="c1"><span class="c7">Documentazione su singola macchina</span></p><p class="c0"><span></span></p><p class="c1"><span>E&#39; necessario avere una macchina con Java 7 (si pu&ograve; usare </span><span class="c4">configClusterJava.sh </span><span>a tale scopo)</span></p><p class="c0"><span></span></p><p class="c1"><span>Clone repository GitHub ( </span><span class="c8"><a class="c5" href="https://github.com/furio/alfred-mpi">https://github.com/furio/alfred-mpi</a></span><span>&nbsp;)</span></p><p class="c1"><span>Entrare nella directory </span><span class="c4">runningScripts/</span></p><p class="c1"><span>Copiare i file </span><span class="c4">.sh </span><span>nella home dell&#39;utente prescelto</span></p><p class="c0"><span class="c4"></span></p><p class="c1"><span>Eseguire come utente</span></p><p class="c1"><span>&gt; </span><span class="c4">configClusterMpj.sh $USER</span></p><p class="c0"><span class="c4"></span></p><p class="c1"><span>Compilare e spostare JAR / File di configurazione:</span></p><p class="c1"><span>&gt; </span><span class="c4">mvn clean compile package shade:shade</span></p><p class="c1"><span>&gt; </span><span class="c4">mv $jar_e_file_conf /home/$USER</span></p><p class="c0"><span></span></p><p class="c1"><span>Editare il file </span><span class="c4">runAlfredMPI.sh</span><span>&nbsp;alla voce </span><span class="c4">OMPI_SLAVES </span><span>con il numero di slave richiesti</span></p><p class="c0"><span></span></p><p class="c1"><span>Run del JAR con:</span></p><p class="c1"><span>&gt; </span><span class="c4">runAlfredMPI.sh -c configuration.properties -d domain.properties</span></p></body></html>